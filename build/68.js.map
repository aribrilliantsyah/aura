{"version":3,"sources":["../../src/pages/list-reservasi/list-reservasi.ts","../../src/pages/list-reservasi/list-reservasi.module.ts"],"names":[],"mappings":"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","file":"68.js","sourcesContent":["import {Component, ViewChild} from '@angular/core';\nimport {\n    IonicPage,\n    NavController,\n    NavParams,\n    ItemSliding,\n    Events,\n    Navbar\n} from 'ionic-angular';\n\nimport {ReservasiServiceProvider} from '../../providers/reservasi-service/reservasi-service';\nimport {AuthServiceProvider} from '../../providers/auth-service/auth-service';\nimport {LoadingServiceProvider} from '../../providers/loading-service/loading-service';\nimport {ToastServiceProvider} from '../../providers/toast-service/toast-service';\nimport {ModalServiceProvider} from '../../providers/modal-service/modal-service';\n\nimport {Reservasi} from '../../models/reservasi.interface';\n\n/**\n * Generated class for the ListReservasiPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component(\n    {selector: 'page-list-reservasi', templateUrl: 'list-reservasi.html'}\n)\nexport class ListReservasiPage {\n\n    @ViewChild(Navbar)navBar: Navbar;\n\n    public list_reservasi: Reservasi[];\n\n    token: string;\n    dateParam: string;\n\n    data: any;\n    model: {\n        uid: any,\n        date: any,\n        time: any,\n        desc: any,\n        unit_usaha_id: any\n    };\n    time: any;\n\n    reservasi: Reservasi;\n\n    public count: number = 0;\n    public errorsCount: number = 0;\n\n    constructor(\n        public navCtrl : NavController,\n        public navParams : NavParams,\n        private auth : AuthServiceProvider,\n        private loading : LoadingServiceProvider,\n        private toast : ToastServiceProvider,\n        private modal : ModalServiceProvider,\n        private reservasiProv : ReservasiServiceProvider,\n        private events : Events,\n    ) {}\n\n    ionViewDidLoad() {\n        console.log('ionViewDidLoad ListReservasiPage');\n\n        this.navBar.backButtonClick = (e : UIEvent) => {\n            // todo something\n            this\n                .navCtrl\n                .setRoot('SuperTabReservasiPage');\n        }\n\n        this.data = this\n            .navParams\n            .get('data');\n        this.token = this\n            .navParams\n            .get('token');\n        this.dateParam = this\n            .navParams\n            .get('dateParam');\n\n        let feedback = this\n            .navParams\n            .get('feedback');\n        if (feedback) {\n            this\n                .toast\n                .show(feedback);\n        }\n\n        if (this.token) {\n            this.get_list_time(this.token)\n        } else {\n            this\n                .navCtrl\n                .setRoot('ReservasiPage')\n        }\n\n    }\n\n    ionViewWillLeave() {\n        console.log('balik')\n        this\n            .events\n            .publish('back:reservasi', true);\n    }\n\n    get_list_time(token : string) {\n        let loader = this\n            .loading\n            .show('Please Wait ....');\n        loader\n            .present()\n            .then(() => {\n                this.count = 0;\n                this\n                    .reservasiProv\n                    .get_list_time(token, this.dateParam)\n                    .subscribe(data => {\n                        this.time = data,\n                        console.log('wew', data)\n                    }, error => this.requestError(loader), () => this.requestDone(loader));\n            });\n    }\n\n    private requestDone(loader) {\n        this.count++;\n\n        if (this.count == 1) {\n            loader.dismiss();\n        }\n    }\n\n    private requestError(loader) {\n        this.errorsCount++;\n        console.log(this.errorsCount)\n        if (this.errorsCount >= 1) {\n            loader\n                .dismiss()\n                .then(() => {\n                    this\n                        .toast\n                        .show('Server Busy, Please try again');\n                })\n        }\n    }\n\n    public doit(reservasi : any) {\n        let modal = this\n            .modal\n            .presentModal('ModalReservasiPage', {\n                title: reservasi.user == 1\n                    ? 'Tambah'\n                    : 'Ubah',\n                data: {\n                    date: (\n                        reservasi.date != undefined\n                            ? reservasi.date\n                            : ''\n                    ),\n                    time: (\n                        reservasi.time != undefined\n                            ? reservasi.time\n                            : ''\n                    ),\n                    uid: (\n                        reservasi.uid != null\n                            ? reservasi.uid\n                            : ''\n                    ),\n                    unit_usaha_id: (\n                        this.data.unit_usaha_id != undefined\n                            ? this.data.unit_usaha_id\n                            : ''\n                    )\n                },\n                token: this.token,\n                dateParam: this.dateParam\n            });\n\n        modal.onDidDismiss(data => {\n            console.log('phew', data)\n            this.get_list_time(data.token);\n            this\n                .toast\n                .show(data.feedback);\n        })\n\n        modal.present();\n    }\n\n    undo = (slidingItem : ItemSliding) => {\n        slidingItem.close();\n    }\n\n    delete = (item : any): void => {\n        let index = this\n            .time\n            .indexOf(item);\n        // if (index > -1) {     this.list_reservasi.splice(index, 1);\n\n        this.count = 0;\n        let loader = this\n            .loading\n            .show('Please Wait ....');\n        loader\n            .present()\n            .then(() => {\n                this\n                    .reservasiProv\n                    .reservasiCancel(this.token, item.uid, item.unit_usaha_id)\n                    .subscribe(\n                        data => console.log('cancel :', data),\n                        error => this.requestError(loader),\n                        () => {\n                            this.requestDone(loader),\n                            this.get_list_time(this.token)\n                        }\n                    );\n            });\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list-reservasi/list-reservasi.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ListReservasiPage } from './list-reservasi';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    ListReservasiPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ListReservasiPage),\n    ComponentsModule\n  ],\n})\nexport class ListReservasiPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list-reservasi/list-reservasi.module.ts"],"sourceRoot":""}