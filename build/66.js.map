{"version":3,"sources":["../../src/pages/photo-profile/photo-profile.ts","../../src/pages/photo-profile/photo-profile.module.ts"],"names":[],"mappings":"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","file":"66.js","sourcesContent":["import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ActionSheetController, ToastController, Platform, LoadingController, Loading, normalizeURL, Events } from 'ionic-angular';\n\nimport { Storage } from '@ionic/storage';\nimport { File } from '@ionic-native/file';\nimport { Transfer, TransferObject } from '@ionic-native/transfer';\nimport { FilePath } from '@ionic-native/file-path';\nimport { Camera } from '@ionic-native/camera';\n\nimport { ProfileServiceProvider } from '../../providers/profile-service/profile-service'\n\ndeclare var cordova: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-photo-profile',\n  templateUrl: 'photo-profile.html',\n})\nexport class PhotoProfilePage {\n\n  lastImage: string = null;\n  loading: Loading;\n\n  token: string;\n\n  constructor(\n  \t  public navCtrl: NavController,\n  \t  public navParams: NavParams,\n  \t  private camera: Camera,\n  \t  private transfer: Transfer,\n  \t  private file: File, \n  \t  private filePath: FilePath, \n  \t  public actionSheetCtrl: ActionSheetController, \n  \t  public toastCtrl: ToastController, \n  \t  public platform: Platform, \n  \t  public loadingCtrl: LoadingController,\n  \t  private storage: Storage,\n  \t  private events: Events,\n  \t  private profile: ProfileServiceProvider,\n  ) { }\n\n  ionViewDidEnter() {\n    this.storage.get('token').then((token) => {\n      if(token != undefined || token != null){\n        this.token = token;\n      }\n    });\n  }\n\n  public presentActionSheet() {\n   \tlet actionSheet = this.actionSheetCtrl.create({\n      title: 'Select Image Source',\n      buttons: [\n        {\n          text: 'Load from Library',\n          handler: () => {\n            this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY);\n          }\n        },\n        {\n          text: 'Use Camera',\n          handler: () => {\n            this.takePicture(this.camera.PictureSourceType.CAMERA);\n          }\n        },\n        {\n          text: 'Cancel',\n          role: 'cancel'\n        }\n      ]\n    });\n    actionSheet.present();\n  }\n\n  public takePicture(sourceType) {\n\t\t// Create options for the Camera Dialog\n\t\tvar options = {\n\t\t  quality: 100,\n\t\t  sourceType: sourceType,\n\t\t  saveToPhotoAlbum: false,\n\t\t  correctOrientation: true\n\t\t};\n\t\t \n\t\t// Get the data of an image\n\t\tthis.camera.getPicture(options).then((imagePath) => {\n\t\t  // Special handling for Android library\n\t\t  if (this.platform.is('android') && sourceType === this.camera.PictureSourceType.PHOTOLIBRARY) {\n\t\t    this.filePath.resolveNativePath(imagePath)\n\t\t      .then(filePath => {\n\t\t        let correctPath = filePath.substr(0, filePath.lastIndexOf('/') + 1);\n\t\t        let currentName = imagePath.substring(imagePath.lastIndexOf('/') + 1, imagePath.lastIndexOf('?'));\n\t\t        this.copyFileToLocalDir(correctPath, currentName, this.createFileName());\n\t\t      });\n\t\t  } else {\n\t\t    var currentName = imagePath.substr(imagePath.lastIndexOf('/') + 1);\n\t\t    var correctPath = imagePath.substr(0, imagePath.lastIndexOf('/') + 1);\n\t\t    this.copyFileToLocalDir(correctPath, currentName, this.createFileName());\n\t\t  }\n\t\t}, (err) => {\n\t\tthis.presentToast('Error while selecting image.');\n\t\t});\n  }\n\n\n\t// Create a new name for the image\n\tprivate createFileName() {\n\t  var d = new Date(),\n\t  n = d.getTime(),\n\t  newFileName =  n + \".jpg\";\n\t  return newFileName;\n\t}\n\t \n\t// Copy the image to a local folder\n\tprivate copyFileToLocalDir(namePath, currentName, newFileName) {\n\t  this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(success => {\n\t    this.lastImage = newFileName;\n\t  }, error => {\n\t    this.presentToast('Error while storing file.');\n\t  });\n\t}\n\t \n\tprivate presentToast(text) {\n\t  let toast = this.toastCtrl.create({\n\t    message: text,\n\t    duration: 3000,\n\t    position: 'top'\n\t  });\n\t  toast.present();\n\t}\n\t \n\t// Always get the accurate path to your apps folder\n\tpublic pathForImage(img) {\n\t  if (img === null) {\n\t    return '';\n\t  } else {\n\t    return cordova.file.dataDirectory + img;\n\t  }\n\t}\n\n\tpublic uploadImage() {\n\t  // Destination URL\n\t  var url = this.profile.photoPostUrl();\n\t \n\t  // File for Upload\n\t  var targetPath = this.pathForImage(this.lastImage);\n\t \n\t  // File name only\n\t  var filename = this.lastImage;\n\t \n\t  var options = {\n\t    fileKey: \"foto\",\n\t    fileName: filename,\n\t    chunkedMode: false,\n\t    mimeType: \"multipart/form-data\",\n\t    params : {'fileName': filename},\n\t    headers: {\n\t    \t'Authorization': `berare ${this.token}`,\n\t    }\n\t  };\n\n\t  console.log(options)\n\t \n\t  const fileTransfer: TransferObject = this.transfer.create();\n\t \n\t  this.loading = this.loadingCtrl.create({\n\t    content: 'Uploading...',\n\t  });\n\t  this.loading.present();\n\t \n\t  // Use the FileTransfer to upload the image\n\t  fileTransfer.upload(targetPath, url, options).then(data => {\n\t  \tconsole.log(data.response)\n\t    this.loading.dismissAll()\n\t    this.presentToast('Image successfull uploaded.');\n\t    this.navCtrl.setRoot('IndexProfilePage',{\n\t    \t'feedback': 'Foto berhasil di perbaharui',\n\t    })\n\n\t    this.events.publish('foto:update', Math.floor(Date.now()));\n\n\t  }, (error) => {\n\t  \tconsole.log('ini error mz',error)\n\t    this.loading.dismissAll()\n\t    this.presentToast('Error while uploading file.');\n\t  });\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/photo-profile/photo-profile.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PhotoProfilePage } from './photo-profile';\n\n@NgModule({\n  declarations: [\n    PhotoProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PhotoProfilePage),\n  ],\n})\nexport class PhotoProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/photo-profile/photo-profile.module.ts"],"sourceRoot":""}