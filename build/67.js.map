{"version":3,"sources":["../../src/pages/modal-reservasi/modal-reservasi.ts","../../src/pages/modal-reservasi/modal-reservasi.module.ts"],"names":[],"mappings":"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","file":"67.js","sourcesContent":["import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\n\nimport { MasterServiceProvider } from '../../providers/master-service/master-service';\nimport { ReservasiServiceProvider } from '../../providers/reservasi-service/reservasi-service';\nimport { LoadingServiceProvider } from '../../providers/loading-service/loading-service';\nimport { AlertServiceProvider } from '../../providers/alert-service/alert-service';\nimport { ToastServiceProvider } from '../../providers/toast-service/toast-service';\n\nimport { Master } from '../../models/master.interface';\nimport { Reservasi } from '../../models/reservasi.interface';\n\n\n/**\n * Generated class for the ModalReservasiPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-modal-reservasi',\n  templateUrl: 'modal-reservasi.html',\n})\nexport class ModalReservasiPage {\n  data : any;\n  model: {uid:any,date:any,time:any};\n  list_unit_usaha: Master;\n  list_layanan: Master;\n  list_dokter: Master;\n  list_reminder: Master;\n  reservasi: Reservasi = {\n    id: null,\n    uid: null,\n    tanggal: null,\n    waktu: null,\n    no_reservasi: null,\n    unit_usaha_id: null,\n    unit_usaha: null,\n    layanan_id: null,\n    layanan: null,\n    dokter_id: null,\n    dokter: null,\n    pasien_id: null,\n    pasien: null,\n    status: null,\n    reminder_1_id: null,\n    reminder_2_id: null,\n    reminder_1: null,\n    reminder_2: null,\n    pasien_no_rekam_medis: null,\n  };\n\n  token: string;\n  dateParam: string;\n\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    public master: MasterServiceProvider,\n    public reservProv: ReservasiServiceProvider,\n    private loading: LoadingServiceProvider,\n    private alert: AlertServiceProvider,\n    private toast: ToastServiceProvider,\n  ) {\n\n  }\n\n  ionViewWillLoad() {\n  \tthis.data = this.navParams.get('data');\n    this.token = this.navParams.get('token');\n    this.dateParam = this.navParams.get('dateParam');\n\n    console.log('param', this.data)\n\n    if(this.token){\n      this.master.get_list_unit_usaha(this.token).subscribe((data) => this.list_unit_usaha = data.data);\n      this.master.get_reminder(this.token).subscribe((data) => this.list_reminder = data.data);\n    }\n\n  \tif(this.data.uid){\n        this.reservProv.get_reserv_by_uid(this.token, this.data.uid).subscribe(\n        (data) => {\n          console.log('ini',data.data)\n            this.reservasi = data.data,\n            this.set_clinic(this.reservasi.unit_usaha_id)\n        }, (error) => {\n            console.log('error', error)\n        }, () => console.log('Request Done'))\n    }else{\n        this.reservasi.uid = (this.data.uid != undefined ? this.data.uid:undefined);\n        this.reservasi.tanggal = (this.data.date != undefined ? this.data.date:'');\n        this.reservasi.waktu = (this.data.time != undefined ? this.data.time:'');\n        this.reservasi.unit_usaha_id = (this.data.unit_usaha_id != undefined ? this.data.unit_usaha_id: '');\n\n    }\n\n  }\n\n  save(){\n    let loader = this.loading.show('loading ....');\n    loader.present().then(() => {\n      this.reservProv.saveReservasi(this.reservasi,this.token,this.data.uid).subscribe((data) => this.saveSuccess(data,loader), error => this.saveError(error,loader), () => this.saveDone());\n    })\n  }\n\n  private saveDone(){\n  }\n\n  private saveError(error,l){\n    l.dismiss().then(() => {\n      if (error.status == 422) {\n        this.alert.presentAlert(null,this.feedbackText(error.json()),'Close');\n      } else if (error.status == 400) {\n        this.alert.presentAlert(null,'Bad Request','Close');\n      } else {\n        this.toast.show('Server Error');\n      }\n    });\n  }\n\n  private saveSuccess(data,l){\n    l.dismiss().then(() => {\n      this.viewCtrl.dismiss({\n        data : this.reservasi,\n        token : this.token,\n        dateParam : this.dateParam,\n        feedback: 'Berhasil !!!',\n      });\n    });\n  }\n\n  private feedbackText(error){\n    let feedbackError = '<ion-list>';\n    for(let key in error){\n      for(let i = 0;i < error[key].length; i++){\n        feedbackError += '<ion-item> - '+error[key][i]+'</ion-item><br><br>';\n      }\n    }\n    feedbackError += '</ion-list>';\n\n    return feedbackError;\n  }\n\n  public closeModal(){\n    this.viewCtrl.dismiss({\n      token : this.token,\n      dateParam : this.dateParam,\n    });\n  }\n\n  private set_clinic(id: number){\n    this.master.get_layanan_by_unit_usaha(this.token, id).subscribe((data) => this.list_layanan = data.data, error => console.log(error), () => this.set_layanan(this.reservasi.layanan_id));\n  }\n\n  private set_layanan(id: number){\n    this.master.get_dokter_by_layanan(this.token, id).subscribe((data) => this.list_dokter = data.data, error => console.log(error), () => console.log('Layanan Set.'));\n  }\n\n\n  public change_clinic(id: number){\n    this.reservasi.layanan_id = null;\n    this.reservasi.dokter_id = null;\n    this.list_layanan = undefined;\n    this.list_dokter = undefined;\n    this.master.get_layanan_by_unit_usaha(this.token, id).subscribe((data) => this.list_layanan = data.data, error => console.log(error), () => console.log('klinik changed.'));\n  }\n\n  public change_layanan(id: number){\n    this.reservasi.dokter_id = null;\n    this.list_dokter = undefined;\n    this.master.get_dokter_by_layanan(this.token, id).subscribe((data) => this.list_dokter = data.data, error => console.log(error), () => console.log('Layanan changed.'));\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-reservasi/modal-reservasi.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ModalReservasiPage } from './modal-reservasi';\n\n@NgModule({\n  declarations: [\n    ModalReservasiPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ModalReservasiPage),\n  ],\n})\nexport class ModalReservasiPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-reservasi/modal-reservasi.module.ts"],"sourceRoot":""}